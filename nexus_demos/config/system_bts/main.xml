<root main_tree_to_execute="main">
  <BehaviorTree ID="main">
    <ReactiveSequence>
      <IsPauseTriggered paused="{paused}"/>
      <Fallback>
        <PausableSequence pause="{paused}">
          <ForEachTask task="{task}" workcell="{workcell}">
            <ExecuteTask task="{task}" workcell="{workcell}"/>
          </ForEachTask>
          <CreateTransporterTask workcell_task="{task}" destination="{workcell}" result="{maybe_transport_task}"/>
          <IfThenElse>
            <!-- Return SUCCESS and populate transport task if transportation is necessary, FAILURE if not necessary -->
            <UnpackTransporterTask input="{maybe_transport_task}" output="{transport_task}" />
            <Sequence>
              <BidTransporter name="bid_transporterasdasd" transport_task="{transport_task}" result="{transporter}"/>
              <TransporterRequest name="transporter_request" transport_task="{transport_task}" transporter="{transporter}"/>
            </Sequence>
            <AlwaysSuccess />
          </IfThenElse>
          <SendSignal task="{task}" signal="transporter_done"/>
        </PausableSequence>
        <PausableSequence pause="{paused}">
          <CreateTransporterTask workcell_task="{task}" destination="{workcell}" result="{maybe_transport_task}"/>
          <IfThenElse>
            <!-- Return SUCCESS and populate transport task if transportation is necessary, FAILURE if not necessary -->
            <UnpackTransporterTask input="{maybe_transport_task}" output="{transport_task}" />
            <Sequence>
              <BidTransporter name="bid_transporterasdasd" transport_task="{transport_task}" result="{transporter}"/>
              <TransporterRequest name="transporter_request" transport_task="{transport_task}" transporter="{transporter}"/>
            </Sequence>
            <AlwaysSuccess />
          </IfThenElse>
          <SendSignal task="{task}" signal="transporter_done"/>
          <AlwaysFailure/>
        </PausableSequence>
      </Fallback>
    </ReactiveSequence>
  </BehaviorTree>
</root>
